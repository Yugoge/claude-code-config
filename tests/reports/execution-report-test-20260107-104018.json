{
  "request_id": "test-20260107-104018",
  "timestamp": "2026-01-07T10:40:18Z",
  "executor": {
    "status": "completed",
    "execution_started": "2026-01-07T10:40:25Z",
    "execution_completed": "2026-01-07T10:40:50Z",
    "total_duration_seconds": 25.0,
    "checkpoint_commit": "dbf4d76e2ab5ece6d7fc5b6fa26b404ea7faafa3",
    "results": [
      {
        "validator": "validate-venv-usage",
        "type": "script",
        "edge_case": "EC002",
        "priority": "critical",
        "execution": {
          "started_at": "2026-01-07T10:40:25Z",
          "completed_at": "2026-01-07T10:40:30Z",
          "duration_seconds": 5.0,
          "exit_code": 1,
          "status": "fail"
        },
        "result": {
          "validator": "validate-venv-usage",
          "edge_case": "EC002",
          "status": "fail",
          "violations": [
            {
              "file": "docs/test/test-implementation-guide.md",
              "line": 523,
              "pattern": "python ~/.claude/script.py",
              "expected": "source venv/bin/activate && python ~/.claude/script.py",
              "severity": "critical",
              "context": "│   └── commands/clean.md      # Contains: \"python ~/.claude/script.py\""
            },
            {
              "file": "docs/test/edge-case-analysis-summary.md",
              "line": 48,
              "pattern": "python ~/.claude/scripts/xxx.py",
              "expected": "source venv/bin/activate && python ~/.claude/scripts/xxx.py",
              "severity": "critical",
              "context": "python ~/.claude/scripts/xxx.py"
            },
            {
              "file": "test/reports/execution-report-test-20260107-095503.json",
              "line": 29,
              "pattern": "python3 ~/.claude/hooks/hook-todo-injection.py",
              "expected": "source venv/bin/activate && python3 ~/.claude/hooks/hook-todo-injection.py",
              "severity": "critical",
              "context": "\"pattern\": \"python3 ~/.claude/hooks/hook-todo-injection.py\","
            },
            {
              "file": "test/reports/execution-report-test-20260107-095503.json",
              "line": 36,
              "pattern": "python3 ~/.claude/hooks/hook-todo-injection.py",
              "expected": "source venv/bin/activate && python3 ~/.claude/hooks/hook-todo-injection.py",
              "severity": "critical",
              "context": "\"pattern\": \"python3 ~/.claude/hooks/hook-todo-injection.py\","
            },
            {
              "file": "test/reports/execution-report-test-20260107-095503.json",
              "line": 43,
              "pattern": "python ~/.claude/scripts/todo/xxx.py",
              "expected": "source venv/bin/activate && python ~/.claude/scripts/todo/xxx.py",
              "severity": "critical",
              "context": "\"pattern\": \"python ~/.claude/scripts/todo/xxx.py\","
            },
            {
              "file": "test/reports/execution-report-test-20260107-095503.json",
              "line": 50,
              "pattern": "python ~/.claude/script.py",
              "expected": "source venv/bin/activate && python ~/.claude/script.py",
              "severity": "critical",
              "context": "\"pattern\": \"python ~/.claude/script.py\","
            },
            {
              "file": "test/reports/execution-report-test-20260107-095503.json",
              "line": 57,
              "pattern": "python ~/.claude/scripts/xxx.py",
              "expected": "source venv/bin/activate && python ~/.claude/scripts/xxx.py",
              "severity": "critical",
              "context": "\"pattern\": \"python ~/.claude/scripts/xxx.py\","
            },
            {
              "file": "test/reports/execution-report-test-20260107-095503.json",
              "line": 64,
              "pattern": "python ~/.claude/scripts/todo/clean.py",
              "expected": "source venv/bin/activate && python ~/.claude/scripts/todo/clean.py",
              "severity": "critical",
              "context": "\"pattern\": \"python ~/.claude/scripts/todo/clean.py\","
            },
            {
              "file": "test/reports/execution-report-test-20260107-095503.json",
              "line": 71,
              "pattern": "python ~/.claude/scripts/todo/clean.py",
              "expected": "source venv/bin/activate && python ~/.claude/scripts/todo/clean.py",
              "severity": "critical",
              "context": "\"pattern\": \"python ~/.claude/scripts/todo/clean.py\","
            },
            {
              "file": "test/reports/execution-report-test-20260107-095503.json",
              "line": 78,
              "pattern": "python ~/.claude/scripts/todo/{workflow-name}.py",
              "expected": "source venv/bin/activate && python ~/.claude/scripts/todo/{workflow-name}.py",
              "severity": "critical",
              "context": "\"pattern\": \"python ~/.claude/scripts/todo/{workflow-name}.py\","
            },
            {
              "file": "test/reports/execution-report-test-20260107-095503.json",
              "line": 85,
              "pattern": "python3 /root/.claude/scripts/todo/clean.py",
              "expected": "source venv/bin/activate && python3 /root/.claude/scripts/todo/clean.py",
              "severity": "critical",
              "context": "\"pattern\": \"python3 /root/.claude/scripts/todo/clean.py\","
            },
            {
              "file": "docs/dev/qa-report-dev-20260107-100221.json",
              "line": 28,
              "pattern": "python ~/.claude/script.py",
              "expected": "source venv/bin/activate && python ~/.claude/script.py",
              "severity": "critical",
              "context": "\"docs/test/test-implementation-guide.md:523 - Contains example pattern 'python ~/.claude/script.py'\","
            },
            {
              "file": "docs/dev/qa-report-dev-20260107-100221.json",
              "line": 159,
              "pattern": "python ~/.claude/script.py",
              "expected": "source venv/bin/activate && python ~/.claude/script.py",
              "severity": "critical",
              "context": "\"issue\": \"Documentation contains example pattern 'python ~/.claude/script.py' without venv activation\","
            }
          ],
          "summary": {
            "total_files_checked": 4138,
            "violations_found": 13
          },
          "recommendations": [
            "Update Python invocations to use: source ~/.claude/venv/bin/activate && python3 script.py",
            "See agents/dev.md Section 4 for proper venv usage patterns"
          ]
        }
      },
      {
        "validator": "validate-todowrite-requirement",
        "type": "script",
        "edge_case": "EC003",
        "priority": "critical",
        "execution": {
          "started_at": "2026-01-07T10:40:25Z",
          "completed_at": "2026-01-07T10:40:30Z",
          "duration_seconds": 5.0,
          "exit_code": 1,
          "status": "fail"
        },
        "result": {
          "validator": "validate-todowrite-requirement",
          "edge_case": "EC003",
          "status": "fail",
          "violations": [
            {
              "file": "commands/dev.md",
              "steps_in_command": 13,
              "steps_in_todo": 11,
              "todo_script": "scripts/todo/dev.py",
              "severity": "major",
              "reason": "Step count mismatch: 13 in command vs 11 in todo"
            }
          ],
          "summary": {
            "total_commands_checked": 32,
            "violations_found": 1
          },
          "recommendations": [
            "Create todo script: scripts/todo/{command-name}.py",
            "Use clean.py or dev.py as template",
            "Ensure todo script step count matches command step count",
            "See agents/dev.md Section 7 for todo script requirements"
          ]
        }
      },
      {
        "validator": "validate-step-numbering",
        "type": "script",
        "edge_case": "EC004",
        "priority": "major",
        "execution": {
          "started_at": "2026-01-07T10:40:25Z",
          "completed_at": "2026-01-07T10:40:30Z",
          "duration_seconds": 5.0,
          "exit_code": 0,
          "status": "pass"
        },
        "result": {
          "validator": "validate-step-numbering",
          "edge_case": "EC004",
          "status": "pass",
          "violations": [],
          "summary": {
            "total_files_checked": 32,
            "violations_found": 0
          },
          "recommendations": []
        }
      },
      {
        "validator": "validate-optionality-language",
        "type": "script",
        "edge_case": "EC005",
        "priority": "major",
        "execution": {
          "started_at": "2026-01-07T10:40:25Z",
          "completed_at": "2026-01-07T10:40:30Z",
          "duration_seconds": 5.0,
          "exit_code": 0,
          "status": "pass"
        },
        "result": {
          "validator": "validate-optionality-language",
          "edge_case": "EC005",
          "status": "pass",
          "violations": [],
          "summary": {
            "total_files_checked": 32,
            "violations_found": 0
          },
          "recommendations": []
        }
      },
      {
        "validator": "validate-chinese-content",
        "type": "script",
        "edge_case": "EC006",
        "priority": "major",
        "execution": {
          "started_at": "2026-01-07T10:40:25Z",
          "completed_at": "2026-01-07T10:40:35Z",
          "duration_seconds": 10.0,
          "exit_code": 1,
          "status": "fail"
        },
        "result": {
          "validator": "validate-chinese-content",
          "edge_case": "EC006",
          "status": "fail",
          "violations_count": 2869,
          "violations_summary": {
            "hooks_files": 3,
            "venv_files": 2865,
            "other_files": 1
          },
          "sample_violations": [
            {
              "file": "hooks/start-fswatch-all.sh",
              "line": 3,
              "content": "# 为所有重要仓库启动 fswatch 监控",
              "severity": "major",
              "context": "Chinese characters in functional code"
            },
            {
              "file": "hooks/install-protection-all.sh",
              "line": 3,
              "content": "# 自动为所有 git 仓库安装保护系统",
              "severity": "major",
              "context": "Chinese characters in functional code"
            },
            {
              "file": "hooks/install-auto-sync.sh",
              "line": 3,
              "content": "# 自动同步功能快速安装脚本",
              "severity": "major",
              "context": "Chinese characters in functional code"
            }
          ],
          "summary": {
            "total_files_checked": 9488,
            "violations_found": 2869
          },
          "recommendations": [
            "Translate Chinese content to English in hooks/*.sh files (3 files)",
            "Venv violations (2865) can be ignored - external dependency data",
            "Move bilingual documentation to docs/ (allowed there)",
            "Archive legacy Chinese files to docs/archive/legacy-chinese/"
          ]
        }
      },
      {
        "validator": "validate-file-naming",
        "type": "script",
        "edge_case": "EC007",
        "priority": "major",
        "execution": {
          "started_at": "2026-01-07T10:40:35Z",
          "completed_at": "2026-01-07T10:40:37Z",
          "duration_seconds": 2.0,
          "exit_code": 0,
          "status": "pass"
        },
        "result": {
          "validator": "validate-file-naming",
          "edge_case": "EC007",
          "status": "pass",
          "violations": [],
          "summary": {
            "total_files_checked": 20,
            "violations_found": 0
          },
          "recommendations": []
        }
      },
      {
        "validator": "validate-debug-file-age",
        "type": "script",
        "edge_case": "EC008",
        "priority": "critical",
        "execution": {
          "started_at": "2026-01-07T10:40:35Z",
          "completed_at": "2026-01-07T10:40:40Z",
          "duration_seconds": 5.0,
          "exit_code": 1,
          "status": "fail"
        },
        "result": {
          "validator": "validate-debug-file-age",
          "edge_case": "EC008",
          "status": "fail",
          "violations_count": 2275,
          "violations_summary": {
            "debug_root": 120,
            "debug_archive": 2155
          },
          "sample_violations": [
            {
              "file": "debug/3f284aa9-ee97-4226-9c1f-856acdcc615b.txt",
              "age_days": 38,
              "size_bytes": 10736,
              "last_modified": "2025-11-29T11:49:52.858482",
              "severity": "critical",
              "reason": "File older than 30 days"
            },
            {
              "file": "debug/a99292cd-b24f-4b02-8842-94666cc03f71.txt",
              "age_days": 35,
              "size_bytes": 8273,
              "last_modified": "2025-12-02T12:30:55.988216",
              "severity": "critical",
              "reason": "File older than 30 days"
            }
          ],
          "summary": {
            "total_files_checked": 2749,
            "violations_found": 2275,
            "total_size_mb": 128.44,
            "oldest_file_days": 74,
            "max_age_days": 30
          },
          "recommendations": [
            "Archive files older than 30 days to debug/archive-YYYY-MM/",
            "Total space to free: 128.44 MB",
            "Use /clean command to archive old debug files automatically",
            "Consider setting up automated cleanup (cron/systemd timer)"
          ]
        }
      },
      {
        "validator": "validate-claude-md-protection",
        "type": "script",
        "edge_case": "EC001",
        "priority": "high",
        "execution": {
          "started_at": "2026-01-07T10:40:35Z",
          "completed_at": "2026-01-07T10:40:37Z",
          "duration_seconds": 2.0,
          "exit_code": 1,
          "status": "fail"
        },
        "result": {
          "validator": "validate-claude-md-protection",
          "edge_case": "EC001",
          "status": "fail",
          "violations": [
            {
              "file": "agents/cleanliness-inspector.md",
              "missing_protection": "CLAUDE.md",
              "severity": "critical",
              "reason": "CLAUDE.md not explicitly listed in official files allow-list"
            },
            {
              "file": "agents/cleanliness-inspector.md",
              "missing_protection": "README.md",
              "severity": "critical",
              "reason": "README.md not explicitly listed in official files allow-list"
            },
            {
              "file": "agents/cleanliness-inspector.md",
              "missing_protection": "ARCHITECTURE.md",
              "severity": "critical",
              "reason": "ARCHITECTURE.md not explicitly listed in official files allow-list"
            }
          ],
          "summary": {
            "official_files_checked": 3,
            "violations_found": 3
          },
          "recommendations": [
            "Add official files to allow-list in agents/cleanliness-inspector.md",
            "Document official files in commands/clean.md Step 1",
            "Format: 'ALLOWED: README.md, ARCHITECTURE.md, CLAUDE.md (official Claude Code files)'",
            "Review and update inspection reports to remove relocation recommendations"
          ]
        }
      },
      {
        "validator": "validate-checklist-completeness",
        "type": "script",
        "edge_case": "General",
        "priority": "medium",
        "execution": {
          "started_at": "2026-01-07T10:40:35Z",
          "completed_at": "2026-01-07T10:40:37Z",
          "duration_seconds": 2.0,
          "exit_code": 0,
          "status": "pass"
        },
        "result": {
          "validator": "validate-checklist-completeness",
          "edge_case": "General",
          "status": "pass",
          "violations": [],
          "summary": {
            "required_items": 7,
            "found_items": 7,
            "missing_items": 0
          },
          "recommendations": []
        }
      },
      {
        "validator": "validate-workflow-json-cleanup",
        "type": "script",
        "edge_case": "General",
        "priority": "minor",
        "execution": {
          "started_at": "2026-01-07T10:40:45Z",
          "completed_at": "2026-01-07T10:40:47Z",
          "duration_seconds": 2.0,
          "exit_code": 0,
          "status": "pass"
        },
        "result": {
          "validator": "validate-workflow-json-cleanup",
          "edge_case": "General",
          "status": "pass",
          "violations": [],
          "summary": {
            "total_files_checked": 15,
            "violations_found": 0
          },
          "recommendations": []
        }
      }
    ],
    "summary": {
      "total_tests": 10,
      "passed": 5,
      "failed": 5,
      "errors": 0,
      "pass_rate": 50.0,
      "total_violations_found": 5161,
      "edge_cases_prevented": 4,
      "priority_breakdown": {
        "critical": {
          "total": 3,
          "passed": 0,
          "failed": 3
        },
        "high": {
          "total": 1,
          "passed": 0,
          "failed": 1
        },
        "major": {
          "total": 4,
          "passed": 3,
          "failed": 1
        },
        "medium": {
          "total": 1,
          "passed": 1,
          "failed": 0
        },
        "minor": {
          "total": 1,
          "passed": 1,
          "failed": 0
        }
      }
    },
    "failed_tests": [
      {
        "validator": "validate-venv-usage",
        "edge_case": "EC002",
        "violations_count": 13,
        "files_affected": [
          "docs/test/test-implementation-guide.md",
          "docs/test/edge-case-analysis-summary.md",
          "test/reports/execution-report-test-20260107-095503.json",
          "docs/dev/qa-report-dev-20260107-100221.json"
        ],
        "severity": "critical",
        "recommendation": "Update documentation files to show proper venv activation pattern"
      },
      {
        "validator": "validate-todowrite-requirement",
        "edge_case": "EC003",
        "violations_count": 1,
        "files_affected": [
          "commands/dev.md"
        ],
        "severity": "critical",
        "recommendation": "Update scripts/todo/dev.py to match 13 steps in commands/dev.md"
      },
      {
        "validator": "validate-chinese-content",
        "edge_case": "EC006",
        "violations_count": 2869,
        "files_affected": [
          "hooks/start-fswatch-all.sh",
          "hooks/install-protection-all.sh",
          "hooks/install-auto-sync.sh",
          "venv/lib/python3.12/site-packages/* (2865 files)"
        ],
        "severity": "major",
        "recommendation": "Translate 3 hooks/*.sh files to English. Venv violations (2865) can be ignored."
      },
      {
        "validator": "validate-debug-file-age",
        "edge_case": "EC008",
        "violations_count": 2275,
        "files_affected": [
          "debug/*.txt (120 files)",
          "debug/archive-*/*.txt (2155 files)"
        ],
        "severity": "critical",
        "recommendation": "Archive 120 files from debug/ root. Consider deleting old archive files (2155)."
      },
      {
        "validator": "validate-claude-md-protection",
        "edge_case": "EC001",
        "violations_count": 3,
        "files_affected": [
          "agents/cleanliness-inspector.md"
        ],
        "severity": "high",
        "recommendation": "Add CLAUDE.md, README.md, ARCHITECTURE.md to official files allow-list"
      }
    ]
  }
}
